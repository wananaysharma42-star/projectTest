<!DOCTYPE html>
<html>
<body>
<script>
(function () {

  const originalLog = console.log;

  console.log = function () {

    let output = "";

    for (let i = 0; i < arguments.length; i++) {
      if (typeof arguments[i] === "object") {
        output += JSON.stringify(arguments[i]) + " ";
      } else {
        output += arguments[i] + " ";
      }
    }

    // send to editor
    window.parent.postMessage(
      {
        type: "console",
        message: output
      },
      location.origin
    );

    originalLog.apply(console, arguments);
  };

})();
</script>

<script>
window.addEventListener("message", function (event) {
  if (event.origin !== location.origin) return;

  const { code, theme } = event.data;

  const style =
    theme === "dark"
      ? `<style>
           body { background:#020617; color:#e5e7eb; }
         </style>`
      : `<style>
           body { background:#ffffff; color:#0f172a; }
         </style>`;

  document.open();
  document.write(style + code);
  document.close();
});
</script>
</body>
</html>
